<template>
  <div class="app-container">
  <el-collapse v-model="activeName" accordion>
  <el-collapse-item title="《鬼吹灯》天下霸唱" name="1">
    <div>
    作者：天下霸唱<br/>
    出版年份：2015年<br/>
    出版社：青岛出版社<br/>
    简介：盗墓寻宝，是一部极为经典的悬疑盗墓小说，这部小说也迅速成为了图书销售排行榜的榜首。之后作者继续创作第二部，内容涉及陈瞎子和鹧鸪哨之盗墓往事。<br/>
    鬼吹灯是一个系列形式的文字冒险故事，以一本家传的秘书残卷为引。<br/>
    小说中作者首创历史上四大盗墓门派——摸金、卸岭、发丘、搬山，其中摸金是技术含量最高，规矩最多的门派。“人点烛，鬼吹灯”是传说中摸金派的不传之秘，意为进入古墓之中先在东南角点燃一支蜡烛才能开棺，如果蜡烛熄灭，须速速退出，不可取一物。相传这是祖师爷所定的一条活人与死人的契约，千年传承，不得破。<br/>
    作品目录：<br/>
    鬼吹灯 1 精绝古城<br/>
    鬼吹灯 2 龙岭迷窟<br/>
    鬼吹灯 3 云南虫谷<br/>
    鬼吹灯 4 昆仑神宫<br/>
    鬼吹灯 5 黄皮子坟<br/>
    鬼吹灯 6 南海归墟<br/>
    鬼吹灯7 怒晴湘西<br/>
    鬼吹灯 8 巫峡棺山</div>
  </el-collapse-item>
  <el-collapse-item title="《活着》余华" name="2">
    <div>
    作者：余华<br/>
    出版年份：1993年<br/>
    出版社：Hachette出版公司<br/>
    简介：讲诉了在大时代背景下，随着内战、三反五反，大跃进，文化大革命等社会变革，徐福贵的人生和家庭不断经受着苦难，到了最后所有亲人都先后离他而去，仅剩下年老的他和一头老牛相依为命。<br/>
    这是一个历尽世间沧桑和磨难老人的人生感言，是一幕演绎人生苦难经历的戏剧。小说的叙述者“我”在年轻时获得了一个游手好闲的职业——去乡间收集民间歌谣。在夏天刚刚来到的季节，遇到那位名叫福贵的老人，听他讲述了自己坎坷的人生经历： 地主少爷福贵嗜赌成性，终于赌光了家业一贫如洗，穷困之中福贵因母亲生病前去求医，没想到半路上被国民党部队抓了壮丁，后被解放军所俘虏，回到家乡他才知道母亲已经过世，妻子家珍含辛茹苦带大了一双儿女，但女儿不幸变成了哑巴。<br/>
    真正的悲剧从此才开始渐次上演。家珍因患有软骨病而干不了重活；儿子因与县长夫人血型相同，为救县长夫人抽血过多而亡；女儿凤霞与队长介绍的城里的偏头二喜喜结良缘，产下一男婴后，因大出血死在手术台上；而凤霞死后三个月家珍也相继去世；二喜是搬运工，因吊车出了差错，被两排水泥板夹死；外孙苦根便随福贵回到乡下，生活十分艰难，就连豆子都很难吃上，福贵心疼便给苦根煮豆吃，不料苦根却因吃豆子撑死……生命里难得的温情将被一次次死亡撕扯得粉碎，只剩得老了的福贵伴随着一头老牛在阳光下回忆。

    </div>
  </el-collapse-item>
  <el-collapse-item title="《追风筝的人》[美]卡勒德·胡塞尼" name="3">
    <div>
    作者：[美]卡勒德·胡塞尼<br/>
    出版年份：2003年<br/>
    出版社：上海人民出版社<br/>
    简介：全书围绕风筝与阿富汗的两个少年之间展开，一个富家少年与家中仆人关于风筝的故事，关于人性的背叛与救赎。<br/>
    小说以第一人称的角度讲述了阿米尔的故事。阿米尔生于1963年喀布尔的一个富人社区中的一个富裕家庭。其父亲“爸爸”是普什图人，一名法官的儿子，成功的地毯商人。阿米尔家的仆人阿里的儿子哈桑则出身哈扎拉人。阿米尔和哈桑是好玩伴，哈桑是一个特别忠实，正直，一心只为阿米尔少爷着想的人，两个人经常一起玩耍、游戏。阿米尔是出色的“风筝斗士”，即善于用自己的风筝切断别人的风筝的线；哈桑也是杰出的“风筝追逐者”，因为阿富汗斯坦的传统是线被切断而落下的风筝归追到它的人所有。爸爸对两个孩子都很喜爱，但嫌阿米尔过于怯懦。两个孩子和人打架时总是哈桑出头。阿米尔展露出写作的才华，但爸爸并不看重。爸爸的朋友拉辛汗成了阿米尔的忘年知己。1973年穆罕默德·达乌德·汗等发动政变，在阿富汗斯坦推翻帝制建立共和国。
    </div>
  </el-collapse-item>
  <el-collapse-item title="《天才在左，疯子在右》高铭" name="4">
    <div>
    作者：高铭<br/>
    出版年份：2010年<br/>
    出版社：武汉大学出版社<br/>
    简介：本书以访谈录的形式记载了生活在另一个角落的人群（精神病患者、心理障碍者等边缘人）深刻、视角独特的所思所想，让人们可以了解到疯子抑或天才真正的内心世界。此书是国内第一本具有人文情怀的精神病患谈访录。内容涉及生理学、心理学、佛学、宗教、量子物理、符号学以及玛雅文明和预言等众多领域。<br/>
    作品目录：<br/>
    序言 更多、更多的世界<br/>
    第一篇 生命的尽头<br/>
    第二篇 梦的真实性<br/>
    第三篇 四维虫子<br/>
    第四篇 进化惯性<br/>
    第五篇 三只小猪——前篇：不存在的哥哥<br/>
    第六篇 三只小猪——后篇：多重人格<br/>
    第七篇 女人的星球<br/>
    第八篇 最后的撒旦<br/>
    第九篇 角色问题<br/>
    第十篇 飞禽走兽<br/>
    第十一篇 苹果的味道<br/>
    第十二篇 颅骨穿孔——前篇：异能追寻者<br/>
    第十三篇 颅骨穿孔——后篇：如影随形<br/>
    </div>
  </el-collapse-item>
</el-collapse>
  </div>
</template>

<script>
  export default {
    data() {
      return {
        activeName: '1'
      };
    }
  }
</script>
<script>
// import { getList } from 'api/article';
import {global} from 'src/global/global';
import {api} from 'src/global/api';

export default {
  data() {
    return {
        // list: null,
        // listLoading: true,

        list: null,//表格list
        total: null,
        listLoading: true,
        listQuery: {
            currPage: 1,
            pageSize: 10,

            // importance: undefined,
            title: '',
            type: null,//类型
               
        },
        temp: {
            "chnlId": "22",
            "hisChnlId": "",
            "chnlName": "",
            "state": "",
            "isavailable": "",
            "orderNum": 10
        },
        typeOptions:[
          { key: '001', display_name: '类型1' },
          { key: '002', display_name: '类型2' },
          { key: '003', display_name: '类型3' }
         
        ],
        dialogFormVisible: false,
        multipleSelection: []

    }
  },
  mounted() {
    var vm = this;

    vm.getList();
  },
  methods: {
    //获取列表数据
    getList() {
        var vm = this;

          vm.listLoading = true;
          // fetchList(this.listQuery).then(response => {
          //   this.list = response.data.items;
          //   this.total = response.data.total;
          //   this.listLoading = false;
          // })
        global.get( api.tableList,{params: vm.listQuery },function(res){
                //console.log('-------获取到数据：',JSON.stringify(res) )
                var data = res.body;
               if(data.resultCode == 0){ 
                    
                    vm.list = data.data.data;
                    console.log('列表数据：',vm.list);
                    vm.listQuery.currPage = data.data.currPage;
                    vm.listQuery.pageSize = data.data.pageSize;
                    vm.total = data.data.total;

                    vm.listLoading = false;
                    
               }else{
                    //alert(res.body.resultMsg)
                    Message({
                        showClose: true,
                        message: res.body.resultMsg,
                        type: 'error'
                    });
                    vm.listLoading = false;
               }
               
                
        },function(res){
            
            vm.listLoading = false;
        },false)

        //请求开发环境接口
        // var url = '/urm-mt-interface/service/hisForHzfwhService/';
        // var par = {
        //           "isavailable": "Y",
        //           "beginDate": "20170616",
        //           "endDate": "20170616",
        //           "channelItems": [
        //             {
        //               "chnlId": 1
        //             }
        //           ],
        //           "hospitalId": "1",
        //           "methodCode": "getDeptRegInfo001",
        //           "nonceStr": "2A4B9B991078AC805C1D31CD366FC394",
        //           "openId": "JY160",
        //           "channel": "JY160",
        //           "key": "6BB30AAE2804144011040E664D87AC5452246969",
        //           "signature": "071C301677F98547DD3CA77D48E93EA1BE61872D",
        //           "resultType": "json"
        //     };

        // global.get( url,{params: par },function(res){
        //         console.log('-------开发环境获取到数据：',JSON.stringify(res) )
        //         var data = res.body;
        //        if(data.resultCode == 0){ 
                    
                   
                    
        //        }else{
                    
                   
        //        }
               
                
        // },function(res){
            
           
        // },false)

    },
    //编辑
    handleEdit(index,row){
        var vm = this;
        console.log('编辑的row：',index,'-----',row);
        //跳页面进行修改
        //this.$router.push('/example/form'); 
        this.$router.push( { path: '/example/form', query: { id: row.chnlId } } ); //带参跳转
    },
    //单个删除
    handleDelete(index,row){
        var vm = this;
        console.log('单个删除选择的row：',index,'-----',row);
        //前端删除。
        vm.list.splice(index,1)
    },
    //批量删除
    handleDelAll(){
        var vm = this;
        console.log('批量删除选择的row：',vm.multipleSelection)
    },
    //搜索
    handleFilter() {
      this.getList();
    },
    //操作分页
    handleSizeChange(val) {
      this.listQuery.pageSize = val;
      this.getList();
    },
    //操作分页
    handleCurrentChange(val) {
        console.log('--------',val)
      this.listQuery.currPage = val;
      this.getList();
    },
    //新增
    handleCreate() {
        
        this.dialogFormVisible = true;
    },
    //新增提交
    handleCreateSubmit(){
        var vm = this;
        console.log('新增入参：',vm.temp,vm.list)

        //这里作演示用，正式新增 请提交到接口
        vm.list.push(vm.temp)
        console.log('新增后',vm.list)
        
        this.dialogFormVisible = false;
    },
    handleSelectionChange(val) {
        this.multipleSelection = val;
    },

    handleDownload() {
      var vm = this;

      require.ensure([], () => {
        const { export_json_to_excel } = require('vendor/Export2Excel');
        const tHeader = ['字段1', '字段2', '字段3', '字段4', '字段5'];
        const filterVal = ['chnlId', 'hisChnlId', 'chnlName', 'state', 'isavailable'];
        const list = vm.list;
        const data = vm.formatJson(filterVal, list);
        export_json_to_excel(tHeader, data, '导出的列表excel');
      })
    },
    formatJson(filterVal, jsonData) {
      return jsonData.map(v => filterVal.map(j => v[j]))
    }
  }
};
</script>
